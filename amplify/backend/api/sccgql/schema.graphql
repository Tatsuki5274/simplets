type Department
@model(timestamps:{createdAt: "createdOn", updatedAt: "updatedOn"})
@auth(
  rules: [
    {allow: groups, groups: ["Admin"]}
    {allow: private, operations: [read]}
  ]
)
{
  id: ID!
  code: String
  name: String! #部署名
}

type Category
@model(timestamps:{createdAt: "createdOn", updatedAt: "updatedOn"})
@auth(
  rules: [
    {allow: groups, groups: ["Admin"]}
    {allow: private, operations: [read]}
  ]
)
{
  id: ID!
  code: String
  name: String! #カテゴリ名
}

type Sheet
@model(timestamps:{createdAt: "createdOn", updatedAt: "updatedOn"})
@auth(
  rules: [
    {allow: owner}
    {allow: groups, groups: ["Admin"]}
    {allow: groups, groups: ["Manager"], operations: [read]}
  ]
)
{
  id: ID!
  year: Int!  #実施年度
  careerPlan: String  #キャリア計画本人希望
  careerPlanComment: String #話し合い結果コメント
    @auth(rules:[
      {allow: groups, groups:["Admin","Manager"]}
      {allow: owner, operations: [read]}
    ])
  overAllEvaluation: Int  #総合評価
    @auth(rules:[
      {allow: groups, groups:["Admin","Manager"]}
      {allow: owner, operations: [read]}
    ])
  firstComment: Comment #部門長コメント
    @connection
    @auth(rules:[
      {allow: groups, groups: ["Admin", "Manager"]}
      {allow: owner, operations: [read]}
    ])
  secondComment: Comment  #所属長コメント
  @connection
  @auth(rules:[
      {allow: groups, groups: ["Admin", "Manager"]}
      {allow: owner, operations: [read]}
  ])
}

type Objective
@model(timestamps:{createdAt: "createdOn", updatedAt: "updatedOn"})
@auth(
  rules: [
    {allow: owner}
    {allow: groups, groups: ["Admin"]}
    {allow: groups, groups: ["Manager"], operations: [read]}
  ]
)
{
  id: ID!
  category: Category @connection  #カテゴリへのリレーション
  objective: String! #目標本文
  result: String  #実績
  status: String  #ステータス　step functionへの移行検討
  selfEvaluation: Int #自己評価
  lastEvaluation: Int #最終評価
  @auth(
    rules: [
      {allow: groups, groups: ["Admin", "Manager"]}
      {allow: owner, operations: [read]}
    ]
  )

}

type Comment
@model(timestamps:{createdAt: "createdOn", updatedAt: "updatedOn"})
@auth(
  rules: [
    {allow: groups, groups: ["Admin"]}
    {allow: groups, groups: ["Manager"]}
    {allow: private, operations: [read]}
  ]
)
{
  id: ID!
  comment: String!
}